apiVersion: loki.grafana.com/v1
kind: LokiStack
metadata:
  name: observatorium-lokistack
  namespace: rhobs-stage
spec:
  limits:
    global:
      ingestion:
        ingestionBurstSize: 256
        ingestionRate: 20
        maxLineSize: 262144
        perStreamRateLimit: 15
        perStreamRateLimitBurst: 30
      otlp:
        streamLabels:
          resourceAttributes:
          - name: k8s.namespace.name
          - name: openshift.label.cluster_name
          - name: openshift.log.source
          - name: openshift.log.type
      queries:
        queryTimeout: 5m
  managementState: Managed
  size: 1x.extra-small
  storage:
    schemas:
    - effectiveDate: "2025-06-06"
      version: v13
    secret:
      name: loki-default-bucket
      type: s3
  storageClassName: gp3-csi
  template:
    distributor:
      replicas: 3
    ingester:
      replicas: 3
    querier:
      replicas: 2
    queryFrontend:
      replicas: 2
status:
  components: {}
  storage: {}
